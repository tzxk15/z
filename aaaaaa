local Lib = {}
if game.CoreGui:FindFirstChild("LibHorizontal") then
    game.CoreGui:FindFirstChild("LibHorizontal"):Destroy()
end

local ScreenGui = Instance.new("ScreenGui", game.CoreGui)
ScreenGui.Name = "LibHorizontal"
ScreenGui.ZIndexBehavior = Enum.ZIndexBehavior.Global

-- toggle con F6
local Usp = game:GetService("UserInputService")
local visible, Usable = true, true
if _G.HideKeybind == nil then
    _G.HideKeybind = Enum.KeyCode.F6
end
Usp.InputBegan:Connect(function(key)
    if key.KeyCode == _G.HideKeybind and Usable then
        Usable = false
        for _,v in pairs(ScreenGui:GetChildren()) do
            spawn(function()
                if visible then
                    v:TweenPosition(UDim2.new(v.Position.X.Scale,v.Position.X.Offset,0,-500),
                        Enum.EasingDirection.In,Enum.EasingStyle.Sine,0.5,true)
                    wait(0.4)
                    v.Visible = false
                else
                    v.Visible = true
                    v:TweenPosition(UDim2.new(v.Position.X.Scale,v.Position.X.Offset,0,100),
                        Enum.EasingDirection.In,Enum.EasingStyle.Sine,0.5,true)
                end
            end)
        end
        wait(0.05)
        Usable = true
        visible = not visible
    end
end)

function Lib:CreatePanel(Name)
    local Panel = {}
    Panel.windows = {}

    -- Main container moderno
    local Main = Instance.new("Frame", ScreenGui)
    Main.Name = "Main"
    Main.Position = UDim2.new(0,150,0,150)
    Main.Size = UDim2.new(0,850,0,500)
    Main.BackgroundColor3 = Color3.fromRGB(15,20,35)
    Main.BackgroundTransparency = 0.15
    Main.BorderSizePixel = 0
    Main.ClipsDescendants = true

    -- Bordes suaves
    Instance.new("UICorner", Main).CornerRadius = UDim.new(0,10)

    -- Glow real
    local Glow = Instance.new("ImageLabel", Main)
    Glow.BackgroundTransparency = 1
    Glow.Size = UDim2.new(1,60,1,60)
    Glow.Position = UDim2.new(0,-30,0,-30)
    Glow.ZIndex = 0
    Glow.Image = "rbxassetid://5028857084" -- glow difuso
    Glow.ImageColor3 = Color3.fromRGB(0,120,255)
    Glow.ImageTransparency = 0.35
    Glow.ScaleType = Enum.ScaleType.Slice
    Glow.SliceCenter = Rect.new(24,24,276,276)

    -- Title bar
    local TitleBar = Instance.new("Frame", Main)
    TitleBar.Size = UDim2.new(1,0,0,35)
    TitleBar.BackgroundColor3 = Color3.fromRGB(10,15,25)
    TitleBar.BackgroundTransparency = 0.2
    TitleBar.BorderSizePixel = 0
    TitleBar.ZIndex = 2
    Instance.new("UICorner", TitleBar).CornerRadius = UDim.new(0,8)

    local Title = Instance.new("TextLabel", TitleBar)
    Title.Size = UDim2.new(1,0,1,0)
    Title.BackgroundTransparency = 1
    Title.Text = Name
    Title.Font = Enum.Font.GothamBold
    Title.TextSize = 15
    Title.TextColor3 = Color3.fromRGB(180,200,255)

    -- Drag
    local dragging, dragStart, startPos
    TitleBar.InputBegan:Connect(function(input)
        if input.UserInputType == Enum.UserInputType.MouseButton1 then
            dragging = true
            dragStart = input.Position
            startPos = Main.Position
            input.Changed:Connect(function()
                if input.UserInputState == Enum.UserInputState.End then
                    dragging = false
                end
            end)
        end
    end)
    TitleBar.InputChanged:Connect(function(input)
        if dragging and input.UserInputType == Enum.UserInputType.MouseMovement then
            local delta = input.Position - dragStart
            Main.Position = UDim2.new(startPos.X.Scale,startPos.X.Offset+delta.X,
                                      startPos.Y.Scale,startPos.Y.Offset+delta.Y)
        end
    end)

    -- Resizer en esquina
    local Resizer = Instance.new("Frame", Main)
    Resizer.Size = UDim2.new(0,15,0,15)
    Resizer.Position = UDim2.new(1,-15,1,-15)
    Resizer.BackgroundColor3 = Color3.fromRGB(0,120,255)
    Resizer.BackgroundTransparency = 0.5
    Resizer.BorderSizePixel = 0
    Resizer.ZIndex = 3
    Instance.new("UICorner", Resizer).CornerRadius = UDim.new(1,0)

    local resizing = false
    Resizer.InputBegan:Connect(function(input)
        if input.UserInputType == Enum.UserInputType.MouseButton1 then
            resizing = true
            input.Changed:Connect(function()
                if input.UserInputState == Enum.UserInputState.End then
                    resizing = false
                end
            end)
        end
    end)
    Usp.InputChanged:Connect(function(input)
        if resizing and input.UserInputType == Enum.UserInputType.MouseMovement then
            local delta = input.Position - Main.AbsolutePosition
            Main.Size = UDim2.new(0, math.max(400,delta.X), 0, math.max(250,delta.Y))
        end
    end)

    -- Barra de tabs
    local Tabs = Instance.new("Frame", Main)
    Tabs.Position = UDim2.new(0,0,0,35)
    Tabs.Size = UDim2.new(1,0,0,35)
    Tabs.BackgroundTransparency = 1

    local TabLayout = Instance.new("UIListLayout", Tabs)
    TabLayout.FillDirection = Enum.FillDirection.Horizontal
    TabLayout.Padding = UDim.new(0,8)
    TabLayout.HorizontalAlignment = Enum.HorizontalAlignment.Left

    -- Contenido
    local Content = Instance.new("Frame", Main)
    Content.Position = UDim2.new(0,0,0,70)
    Content.Size = UDim2.new(1,0,1,-70)
    Content.BackgroundTransparency = 0.35
    Content.BackgroundColor3 = Color3.fromRGB(10,15,25)
    Content.BorderSizePixel = 0
    Instance.new("UICorner", Content).CornerRadius = UDim.new(0,10)

    -- Crear ventana/tab
    function Panel:CreateWindow(WindowName)
        local Window = {}
        local TabBtn = Instance.new("TextButton", Tabs)
        TabBtn.Size = UDim2.new(0,120,1,0)
        TabBtn.Text = WindowName
        TabBtn.Font = Enum.Font.Gotham
        TabBtn.TextSize = 14
        TabBtn.BackgroundColor3 = Color3.fromRGB(25,35,55)
        TabBtn.BackgroundTransparency = 0.25
        TabBtn.TextColor3 = Color3.fromRGB(200,200,255)
        Instance.new("UICorner", TabBtn).CornerRadius = UDim.new(0,6)

        local Holder = Instance.new("ScrollingFrame", Content)
        Holder.Size = UDim2.new(1,0,1,0)
        Holder.Visible = false
        Holder.BackgroundTransparency = 1
        Holder.ScrollBarThickness = 6

        local Layout = Instance.new("UIListLayout", Holder)
        Layout.Padding = UDim.new(0,6)
        Layout.SortOrder = Enum.SortOrder.LayoutOrder

        -- activar ventana
        TabBtn.MouseButton1Click:Connect(function()
            for _,w in pairs(Content:GetChildren()) do
                if w:IsA("ScrollingFrame") then
                    w.Visible = false
                end
            end
            Holder.Visible = true
        end)

        -- funciones
        function Window:Button(txt, callback)
            local Btn = Instance.new("TextButton", Holder)
            Btn.Size = UDim2.new(1,0,0,30)
            Btn.Text = txt
            Btn.Font = Enum.Font.Gotham
            Btn.TextSize = 14
            Btn.BackgroundColor3 = Color3.fromRGB(40,60,90)
            Btn.BackgroundTransparency = 0.25
            Btn.TextColor3 = Color3.new(1,1,1)
            Instance.new("UICorner", Btn).CornerRadius = UDim.new(0,6)
            Btn.MouseButton1Click:Connect(callback or function()end)
        end

        function Window:Label(txt)
            local L = Instance.new("TextLabel", Holder)
            L.Size = UDim2.new(1,0,0,25)
            L.BackgroundTransparency = 1
            L.Text = txt
            L.TextColor3 = Color3.fromRGB(220,220,255)
            L.Font = Enum.Font.Gotham
            L.TextSize = 13
        end

        return Window
    end

    return Panel
end

return Lib
